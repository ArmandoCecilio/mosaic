---
title: Refs
layout: DetailTechnical
sidebar:
  priority: 3
data:
  authorRef: Hello from Author page
  modes:
    - Active mode
    - Snapshot file mode
    - Snapshot AWS/S3 mode
  sidebarPriority: 3
lastModified: 1681297655934
fullPath: /mosaic/author/refs.mdx
route: /mosaic/author/refs
breadcrumbs:
  - label: Mosaic
    path: /mosaic/index.mdx
    id: /mosaic/index.mdx
  - label: Author
    path: /mosaic/author/index.mdx
    id: /mosaic/author/index.mdx
  - label: Refs
    path: /mosaic/author/refs.mdx
    id: /mosaic/author/refs.mdx
readingTime:
  text: 4 min read
  minutes: 3.08
  time: 184800
  words: 616
tableOfContents:
  - level: 1
    id: refs
    text: Refs
  - level: 2
    id: local-refs-in-schema-reference
    text: Local refs (In-schema reference)
  - level: 2
    id: remote-refs-cross-schema-reference
    text: Remote Refs (Cross-schema reference)
  - level: 2
    id: advanced
    text: Advanced
  - level: 3
    id: output
    text: Output
  - level: 3
    id: output-with-mosaic-components
    text: Output with Mosaic Components
  - level: 2
    id: setting-refs-using-plugins
    text: Setting Refs using Plugins
  - level: 3
    id: create-new-refs
    text: Create new refs
  - level: 3
    id: existing-refs
    text: Existing refs
  - level: 3
    id: create-global-refs
    text: Create global refs
navigation:
  prev:
    title: Aliases
    route: /mosaic/author/aliases
  next:
    title: Page Templates
    route: /mosaic/author/page-templates/index
sidebarData:
  - id: /mosaic/author/index
    fullPath: /mosaic/author/index.mdx
    name: Author
    priority: 3
    data:
      level: 2
      link: /mosaic/author/index
    childNodes: []
  - id: /mosaic/author/markdown-syntax
    fullPath: /mosaic/author/markdown-syntax.mdx
    name: Markdown Syntax
    priority: 5
    data:
      level: 2
      link: /mosaic/author/markdown-syntax
    childNodes: []
  - id: /mosaic/author/frontmatter
    fullPath: /mosaic/author/frontmatter.mdx
    name: Frontmatter
    priority: 4
    data:
      level: 2
      link: /mosaic/author/frontmatter
    childNodes: []
  - id: /mosaic/author/aliases
    fullPath: /mosaic/author/aliases.mdx
    name: Aliases
    priority: 3
    data:
      level: 2
      link: /mosaic/author/aliases
    childNodes: []
  - id: /mosaic/author/refs
    fullPath: /mosaic/author/refs.mdx
    name: Refs
    priority: 3
    data:
      level: 2
      link: /mosaic/author/refs
    childNodes: []
  - id: /mosaic/author/page-templates/index
    fullPath: /mosaic/author/page-templates/index.mdx
    name: Page Templates
    priority: 3
    data:
      level: 3
      link: /mosaic/author/page-templates/index
    childNodes:
      - id: /mosaic/author/page-templates/docs/index
        fullPath: /mosaic/author/page-templates/docs/index.mdx
        name: Technical Documentation
        priority: 8
        data:
          level: 4
          link: /mosaic/author/page-templates/docs/index
        childNodes:
          - id: /mosaic/author/page-templates/docs/get-started/index
            fullPath: /mosaic/author/page-templates/docs/get-started/index.mdx
            name: Get started
            priority: 7
            data:
              level: 5
              link: /mosaic/author/page-templates/docs/get-started/index
            childNodes:
              - id: /mosaic/author/page-templates/docs/get-started/task-1
                fullPath: /mosaic/author/page-templates/docs/get-started/task-1.mdx
                name: 1. Task 1
                priority: 2
                data:
                  level: 5
                  link: /mosaic/author/page-templates/docs/get-started/task-1
                childNodes: []
              - id: /mosaic/author/page-templates/docs/get-started/task-2
                fullPath: /mosaic/author/page-templates/docs/get-started/task-2.mdx
                name: 2. Task 2
                priority: 2
                data:
                  level: 5
                  link: /mosaic/author/page-templates/docs/get-started/task-2
                childNodes: []
          - id: /mosaic/author/page-templates/docs/tutorials/index
            fullPath: /mosaic/author/page-templates/docs/tutorials/index.mdx
            name: Tutorials
            priority: 6
            data:
              level: 5
              link: /mosaic/author/page-templates/docs/tutorials/index
            childNodes:
              - id: /mosaic/author/page-templates/docs/tutorials/tutorial-1
                fullPath: /mosaic/author/page-templates/docs/tutorials/tutorial-1.mdx
                name: Tutorial 1
                priority: 2
                data:
                  level: 5
                  link: /mosaic/author/page-templates/docs/tutorials/tutorial-1
                childNodes: []
              - id: /mosaic/author/page-templates/docs/tutorials/tutorial-2/index
                fullPath: >-
                  /mosaic/author/page-templates/docs/tutorials/tutorial-2/index.mdx
                name: Tutorial 2
                priority: 1
                data:
                  level: 6
                  link: >-
                    /mosaic/author/page-templates/docs/tutorials/tutorial-2/index
                childNodes:
                  - id: >-
                      /mosaic/author/page-templates/docs/tutorials/tutorial-2/task-1
                    fullPath: >-
                      /mosaic/author/page-templates/docs/tutorials/tutorial-2/task-1.mdx
                    name: 1. Task 1
                    data:
                      level: 6
                      link: >-
                        /mosaic/author/page-templates/docs/tutorials/tutorial-2/task-1
                    childNodes: []
                  - id: >-
                      /mosaic/author/page-templates/docs/tutorials/tutorial-2/task-2
                    fullPath: >-
                      /mosaic/author/page-templates/docs/tutorials/tutorial-2/task-2.mdx
                    name: 2. Task 2
                    data:
                      level: 6
                      link: >-
                        /mosaic/author/page-templates/docs/tutorials/tutorial-2/task-2
                    childNodes: []
          - id: /mosaic/author/page-templates/docs/how-tos/index
            fullPath: /mosaic/author/page-templates/docs/how-tos/index.mdx
            name: How-tos
            priority: 5
            data:
              level: 5
              link: /mosaic/author/page-templates/docs/how-tos/index
            childNodes:
              - id: /mosaic/author/page-templates/docs/how-tos/task-a
                fullPath: /mosaic/author/page-templates/docs/how-tos/task-a.mdx
                name: Task A
                priority: 2
                data:
                  level: 5
                  link: /mosaic/author/page-templates/docs/how-tos/task-a
                childNodes: []
          - id: /mosaic/author/page-templates/docs/concepts-and-terminology/index
            fullPath: >-
              /mosaic/author/page-templates/docs/concepts-and-terminology/index.mdx
            name: Concepts and terminology
            priority: 4
            data:
              level: 5
              link: >-
                /mosaic/author/page-templates/docs/concepts-and-terminology/index
            childNodes:
              - id: >-
                  /mosaic/author/page-templates/docs/concepts-and-terminology/technical-overview
                fullPath: >-
                  /mosaic/author/page-templates/docs/concepts-and-terminology/technical-overview.mdx
                name: Technical overview
                priority: 3
                data:
                  level: 5
                  link: >-
                    /mosaic/author/page-templates/docs/concepts-and-terminology/technical-overview
                childNodes: []
              - id: >-
                  /mosaic/author/page-templates/docs/concepts-and-terminology/concepts
                fullPath: >-
                  /mosaic/author/page-templates/docs/concepts-and-terminology/concepts.mdx
                name: Concepts
                priority: 2
                data:
                  level: 5
                  link: >-
                    /mosaic/author/page-templates/docs/concepts-and-terminology/concepts
                childNodes: []
              - id: >-
                  /mosaic/author/page-templates/docs/concepts-and-terminology/glossary
                fullPath: >-
                  /mosaic/author/page-templates/docs/concepts-and-terminology/glossary.mdx
                name: Glossary
                priority: 1
                data:
                  level: 5
                  link: >-
                    /mosaic/author/page-templates/docs/concepts-and-terminology/glossary
                childNodes: []
          - id: /mosaic/author/page-templates/docs/api-reference
            fullPath: /mosaic/author/page-templates/docs/api-reference.mdx
            name: API reference
            priority: 3
            data:
              level: 4
              link: /mosaic/author/page-templates/docs/api-reference
            childNodes: []
          - id: /mosaic/author/page-templates/docs/references/index
            fullPath: /mosaic/author/page-templates/docs/references/index.mdx
            name: References
            priority: 2
            data:
              level: 5
              link: /mosaic/author/page-templates/docs/references/index
            childNodes:
              - id: /mosaic/author/page-templates/docs/references/system-entities
                fullPath: >-
                  /mosaic/author/page-templates/docs/references/system-entities.mdx
                name: System entities
                data:
                  level: 5
                  link: >-
                    /mosaic/author/page-templates/docs/references/system-entities
                childNodes: []
          - id: >-
              /mosaic/author/page-templates/docs/troubleshooting-and-support/index
            fullPath: >-
              /mosaic/author/page-templates/docs/troubleshooting-and-support/index.mdx
            name: Troubleshooting and support
            priority: 1
            data:
              level: 5
              link: >-
                /mosaic/author/page-templates/docs/troubleshooting-and-support/index
            childNodes:
              - id: >-
                  /mosaic/author/page-templates/docs/troubleshooting-and-support/faqs
                fullPath: >-
                  /mosaic/author/page-templates/docs/troubleshooting-and-support/faqs.mdx
                name: FAQs
                priority: 2
                data:
                  level: 5
                  link: >-
                    /mosaic/author/page-templates/docs/troubleshooting-and-support/faqs
                childNodes: []
              - id: >-
                  /mosaic/author/page-templates/docs/troubleshooting-and-support/support
                fullPath: >-
                  /mosaic/author/page-templates/docs/troubleshooting-and-support/support.mdx
                name: Support
                priority: 1
                data:
                  level: 5
                  link: >-
                    /mosaic/author/page-templates/docs/troubleshooting-and-support/support
                childNodes: []
      - id: /mosaic/author/page-templates/product/index
        fullPath: /mosaic/author/page-templates/product/index.mdx
        name: Product Marketing
        data:
          level: 4
          link: /mosaic/author/page-templates/product/index
        childNodes:
          - id: /mosaic/author/page-templates/product/features
            fullPath: /mosaic/author/page-templates/product/features.mdx
            name: Features & Benefits
            data:
              level: 4
              link: /mosaic/author/page-templates/product/features
            childNodes: []
          - id: /mosaic/author/page-templates/product/resources
            fullPath: /mosaic/author/page-templates/product/resources.mdx
            name: Resources
            data:
              level: 4
              link: /mosaic/author/page-templates/product/resources
            childNodes: []
          - id: /mosaic/author/page-templates/product/use-cases
            fullPath: /mosaic/author/page-templates/product/use-cases.mdx
            name: Use Cases
            data:
              level: 4
              link: /mosaic/author/page-templates/product/use-cases
            childNodes: []
  - id: /mosaic/author/ui-components/index
    fullPath: /mosaic/author/ui-components/index.mdx
    name: UI Components
    priority: 2
    data:
      level: 3
      link: /mosaic/author/ui-components/index
    childNodes:
      - id: /mosaic/author/ui-components/accordion
        fullPath: /mosaic/author/ui-components/accordion.mdx
        name: Accordion
        priority: 25
        data:
          level: 3
          link: /mosaic/author/ui-components/accordion
        childNodes: []
      - id: /mosaic/author/ui-components/audio-player
        fullPath: /mosaic/author/ui-components/audio-player.mdx
        name: Audio player
        priority: 24
        data:
          level: 3
          link: /mosaic/author/ui-components/audio-player
        childNodes: []
      - id: /mosaic/author/ui-components/button
        fullPath: /mosaic/author/ui-components/button.mdx
        name: Button
        priority: 23
        data:
          level: 3
          link: /mosaic/author/ui-components/button
        childNodes: []
      - id: /mosaic/author/ui-components/callout
        fullPath: /mosaic/author/ui-components/callout.mdx
        name: Callout
        priority: 22
        data:
          level: 3
          link: /mosaic/author/ui-components/callout
        childNodes: []
      - id: /mosaic/author/ui-components/card
        fullPath: /mosaic/author/ui-components/card.mdx
        name: Cards
        priority: 21
        data:
          level: 3
          link: /mosaic/author/ui-components/card
        childNodes: []
      - id: /mosaic/author/ui-components/feature
        fullPath: /mosaic/author/ui-components/feature.mdx
        name: Feature
        priority: 19
        data:
          level: 3
          link: /mosaic/author/ui-components/feature
        childNodes: []
      - id: /mosaic/author/ui-components/hero
        fullPath: /mosaic/author/ui-components/hero.mdx
        name: Hero
        priority: 14
        data:
          level: 3
          link: /mosaic/author/ui-components/hero
        childNodes: []
      - id: /mosaic/author/ui-components/impact
        fullPath: /mosaic/author/ui-components/impact.mdx
        name: Impact
        priority: 13
        data:
          level: 3
          link: /mosaic/author/ui-components/impact
        childNodes: []
      - id: /mosaic/author/ui-components/link
        fullPath: /mosaic/author/ui-components/link.mdx
        name: Link
        priority: 11
        data:
          level: 3
          link: /mosaic/author/ui-components/link
        childNodes: []
      - id: /mosaic/author/ui-components/lists
        fullPath: /mosaic/author/ui-components/lists.mdx
        name: Lists
        priority: 10
        data:
          level: 3
          link: /mosaic/author/ui-components/lists
        childNodes: []
      - id: /mosaic/author/ui-components/tabs
        fullPath: /mosaic/author/ui-components/tabs.mdx
        name: Tabs
        priority: 5
        data:
          level: 3
          link: /mosaic/author/ui-components/tabs
        childNodes: []
      - id: /mosaic/author/ui-components/tiles
        fullPath: /mosaic/author/ui-components/tiles.mdx
        name: Tiles
        priority: 3
        data:
          level: 3
          link: /mosaic/author/ui-components/tiles
        childNodes: []
      - id: /mosaic/author/ui-components/video-player
        fullPath: /mosaic/author/ui-components/video-player.mdx
        name: Video player
        priority: 1
        data:
          level: 3
          link: /mosaic/author/ui-components/video-player
        childNodes: []
---

# {meta.title}

Refs are a very powerful feature of Mosaic documents that use [JSON References](https://json-spec.readthedocs.io/reference.html) to reference
a property from the page frontmatter or frontmatter of other pages.

The key concept is that of a JSON pointer which takes the form **A**#**B** where:

- **A** is the relative path from the current schema to a target schema. If A is empty, the reference is to a type or property in the same schema, an in-schema reference. Otherwise, the reference is to a different schema, a cross-schema reference.
- **B** is the complete path from the root of the schema to a type or property in the schema. If # in not included or B is empty, the reference is to an entire schema.

To translate this for our purposes:

- **A** is the relative path to a file in the filesystem.
- **B** is the path to a property in the frontmatter of the file.

It's probably better explained with examples...

## Local refs (In-schema reference)

It is possible to reference a page's own frontmatter to avoid duplication:

```
---
title: Refs
layout: DetailTechnical
sidebar:
  priority: 3
data:
  sidebarPriority:
     $ref: '#/sidebar/priority'
---
```

This page you are reading right now has a sidebar priority of **{meta.data.sidebarPriority}**.

The value of `data.sidebarPriority` comes from `sidebar.priority` in the frontmatter.

<Callout>
  Notice that because we don't specify a path before the `#` in the ref we need to put the whole
  value inside quotes.
</Callout>

## Remote Refs (Cross-schema reference)

It is possible to reference frontmatter of other pages. Again this helps avoid duplication but the real power is using refs to build the data model. See [advanced](#advanced) for more information.

The [index](./index) page of the Author section has this frontmatter:

```
---
title: Author
layout: DetailTechnical
sidebar:
  priority: 3
data:
  exampleRefData: Hello from Author page
---
```

This page you are currently looking at is referencing the `data.exampleRefData` in it's frontmatter like this:

```
---
title: Refs
layout: DetailTechnical
sidebar:
  priority: 3
data:
  authorRef:
    $ref: ./#/data/exampleRefData
---
```

I can then use the data and embed it in this page like this:

```
{meta.data.authorRef}
```

And here it is: <strong>{meta.data.authorRef}</strong>

<Callout>
  Notice that we did not need to put `/index` in the ref since index pages are resolved
  automatically.
</Callout>

## Advanced

You have had a taste of the power and want to know more? OK, lets reference and then list out all the mosaic modes:

<ul>
  {meta.data.modes.map(mode => (
    <li key={mode}>{mode}</li>
  ))}
</ul>

The Modes [index](../configure/modes/index) page has this frontmatter:

```
---
title: Modes of operation
layout: DetailTechnical
sidebar:
  priority: 4
data:
  modes:
    $ref: ./*#/title
---
```

The ref here is essentially using a wildcard (the \*) to grab the title property from the frontmatter of every page in the modes folder.

We can reference that data just like before:

```
---
title: Refs
layout: DetailTechnical
sidebar:
  priority: 3
data:
  modes:
    $ref: ../configure/modes#/data/modes
---
```

### Output

With the code below, the referenced data can be embedded in a page.

```
<ul>
  {meta.data.modes.map(mode => (
    <li key={mode}>{mode}</li>
  ))}
</ul>
```

### Output with Mosaic Components

You can use Mosaic components with referenced data as well. Below we are using the `Tiles` and `TileContent` components.

<Tiles>
  {meta.data.modes.map(mode => (
    <TileContent
      title={mode}
      description={`Documentation about ${mode} of Mosaic`}
      eyebrow="Mosaic"
    />
  ))}
</Tiles>

```
<Tiles>
  {meta.data.modes.map(mode => (
    <TileContent
      title={mode}
      description={`Documentation about ${mode} of Mosaic`}
      eyebrow="Mosaic"
    />
  ))}
</Tiles>
```

## Setting Refs using Plugins

Mosaic plugins can create new refs, create new _global_ refs and see existing refs created by the page or other plugins. This is achieved using a special `config` property available in the plugin helpers.

### Create new refs

Use the `config.setRef` function from the helpers provided to plugin lifecycle events. You need to provide

- The file/fullpath to write the ref to
- The path to the ptoperty where the ref will be applied
- The value of the ref, which can use wildcards

For example, the following would add a property to pages named `titles`. The value is the title of all pages in the **same** directory as the current page

```
  async $afterSource(pages, { config }) {
    for (const page of pages) {
      config.setRef(page.fullPath, ['titles', '$ref'], `**#/title`);
    }
    return pages;
  }
```

<Callout variant="warning">
  When setting the property path the last string must be `$ref` otherwise you're not creating a ref
  that will be resolved by the RefPlugin.
</Callout>

### Existing refs

To view refs that already exist you can use `config.data.refs`. For example to see all refs for a page:

```
 config.data.refs[fullPathToPage]
```

### Create global refs

Global refs are similar to regular refs except they do not pre-resolve. This means they are resolved when the referenced file is read and the global mosaic filesystem, made up of multiple sources, is used rather than the filesystem of a single source.
